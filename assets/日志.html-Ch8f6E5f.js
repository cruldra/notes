import{_ as r,r as d,o as h,c as o,d as c,w as i,e as t,b as s,a as e}from"./app-Bmelea3n.js";const p={},k=t(`<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p><code>MySQL</code>提供了多种类型的日志,每种都有其特定的用途.</p><p>下面这张表列出了<code>MySQL</code>中常见的几种日志类型:</p><table><thead><tr><th>日志类型</th><th>简介</th></tr></thead><tbody><tr><td><strong><code>错误日志(ErrorLog)</code></strong></td><td>记录MySQL服务器启动、运行或停止时的错误,以及系统的警告信息.</td></tr><tr><td><strong><a href="https://dev.mysql.com/doc/refman/8.0/en/query-log.html" target="_blank" rel="noopener noreferrer"><code>常规查询日志(GeneralQueryLog)</code></a></strong></td><td>记录所有数据库操作,包括客户端的连接/断开以及执行的SQL语句.</td></tr><tr><td><strong><code>慢查询日志(SlowQueryLog)</code></strong></td><td>记录执行时间超过预设阈值的查询语句,用于识别和优化慢查询.</td></tr><tr><td><strong><code>二进制日志(BinaryLog)</code></strong></td><td>记录修改数据库数据的语句,关键于数据复制和恢复操作.</td></tr><tr><td><strong><code>中继日志(RelayLog)</code></strong></td><td>在MySQL复制中使用,记录从主服务器接收的所有事件,用于从服务器数据同步.</td></tr><tr><td><strong><code>事务日志(InnoDBRedoLog)</code></strong></td><td>InnoDB存储引擎特有,记录未提交事务的修改,用于崩溃恢复.</td></tr><tr><td><strong><code>InnoDBUndo日志</code></strong></td><td>InnoDB存储引擎特有,用于事务的回滚和在MVCC中提供旧版本数据.</td></tr><tr><td><strong><code>InnoDB引擎日志(InnoDBLog)</code></strong></td><td>记录InnoDB存储引擎的内部操作,如DDL操作日志,用于调试和优化.</td></tr></tbody></table><h2 id="常规查询日志-general-query-log" tabindex="-1"><a class="header-anchor" href="#常规查询日志-general-query-log"><span>常规查询日志(General Query Log)</span></a></h2><p><a href="https://dev.mysql.com/doc/refman/8.0/en/query-log.html" target="_blank" rel="noopener noreferrer"><code>常规查询日志(GeneralQueryLog)</code></a>会记录所有<code>mysql</code> 客户端发送的命令,包括<code>连接/断开</code>命令和执行的<code>SQL</code>语句.</p><h3 id="启用" tabindex="-1"><a class="header-anchor" href="#启用"><span>启用</span></a></h3><p>可以在开发环境下启用<code>GeneralQueryLog</code>来调试应用程序,以便更好地理解应用程序与数据库之间的交互.</p><h4 id="临时启用" tabindex="-1"><a class="header-anchor" href="#临时启用"><span>临时启用</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"># 查看当前是否启用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">show variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;general_log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"># 查看日志文件位置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">show variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;general_log_file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"># 启用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> general_log </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;ON&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"># 设置日志文件位置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> general_log_file </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;D:/file.log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="永久启用" tabindex="-1"><a class="header-anchor" href="#永久启用"><span>永久启用</span></a></h4>`,11),g=e("div",{class:"language-ini line-numbers-mode","data-highlighter":"shiki","data-ext":"ini","data-title":"ini",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[e("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"[mysqld]")]),s(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"general_log"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," ="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#98C379"}}," on")]),s(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"general_log_file"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," ="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#98C379"}}," D:/mysql.log")])])]),e("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),y=e("div",{class:"language-ini line-numbers-mode","data-highlighter":"shiki","data-ext":"ini","data-title":"ini",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[e("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"[mysqld]")]),s(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"general_log"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," ="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#98C379"}}," on")]),s(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"general_log_file"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," ="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#98C379"}}," D:/mysql.log")])])]),e("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),m=t('<div class="hint-container caution"><p class="hint-container-title">警告</p><p>开启<a href="https://dev.mysql.com/doc/refman/8.0/en/query-log.html" target="_blank" rel="noopener noreferrer"><code>常规查询日志(GeneralQueryLog)</code></a>会对性能产生显著影响,因此不要在生产环境中启用.</p></div><p>然后重启<code>MySQL</code>服务,就可以在<code>general_log_file</code>所在的位置看到所有的<code>SQL</code>语句了.</p><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ul><li><a href="https://poe.com/s/b4V2v14574mPcqeYHgDn" target="_blank" rel="noopener noreferrer">mysql的几种日志</a></li></ul>',4);function u(b,v){const l=d("CodeTabs");return h(),o("div",null,[k,c(l,{id:"106",data:[{id:"Windows(my.ini)"},{id:"Linux(my.cnf)"}],active:0,"tab-id":"dynamicProps"},{title0:i(({value:a,isActive:n})=>[s("Windows(my.ini)")]),title1:i(({value:a,isActive:n})=>[s("Linux(my.cnf)")]),tab0:i(({value:a,isActive:n})=>[g]),tab1:i(({value:a,isActive:n})=>[y]),_:1}),m])}const f=r(p,[["render",u],["__file","日志.html.vue"]]),D=JSON.parse('{"path":"/Databases/Mysql/%E6%97%A5%E5%BF%97.html","title":"日志","lang":"zh-CN","frontmatter":{"title":"日志","comment":false,"editLink":false,"prev":false,"next":false,"description":"简介 MySQL提供了多种类型的日志,每种都有其特定的用途. 下面这张表列出了MySQL中常见的几种日志类型: 常规查询日志(General Query Log) 常规查询日志(GeneralQueryLog)会记录所有mysql 客户端发送的命令,包括连接/断开命令和执行的SQL语句. 启用 可以在开发环境下启用GeneralQueryLog来调试应...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/Databases/Mysql/%E6%97%A5%E5%BF%97.html"}],["meta",{"property":"og:site_name","content":"一星的臭弟弟"}],["meta",{"property":"og:title","content":"日志"}],["meta",{"property":"og:description","content":"简介 MySQL提供了多种类型的日志,每种都有其特定的用途. 下面这张表列出了MySQL中常见的几种日志类型: 常规查询日志(General Query Log) 常规查询日志(GeneralQueryLog)会记录所有mysql 客户端发送的命令,包括连接/断开命令和执行的SQL语句. 启用 可以在开发环境下启用GeneralQueryLog来调试应..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-03T23:01:39.000Z"}],["meta",{"property":"article:author","content":"Cruldra"}],["meta",{"property":"article:modified_time","content":"2024-07-03T23:01:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"日志\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-07-03T23:01:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Cruldra\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"常规查询日志(General Query Log)","slug":"常规查询日志-general-query-log","link":"#常规查询日志-general-query-log","children":[{"level":3,"title":"启用","slug":"启用","link":"#启用","children":[]}]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"git":{"createdTime":1720047699000,"updatedTime":1720047699000,"contributors":[{"name":"cruldra","email":"cruldra@gmail.com","commits":1}]},"readingTime":{"minutes":1.88,"words":563},"filePathRelative":"Databases/Mysql/日志.md","localizedDate":"2024年7月3日","autoDesc":true}');export{f as comp,D as data};
