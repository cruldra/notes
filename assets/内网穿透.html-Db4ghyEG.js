import{_ as s,o as i,c as a,e}from"./app-Bmelea3n.js";const n={},l=e(`<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>有时候需要将本地的服务暴露到外网,比如对接支付的时候,支付网关需要回调我们的接口</p><p>我们可以把本地服务部署到拥有独立ip的公网服务器上去,但是对接测试阶段服务还不完善,随时需要调整,这样就会导致改动一行代码都要重新部署,非常麻烦.</p><p>这时候就可以用内网穿透工具来把本地服务暴露到外网,让支付网关可以直接回调到我们本地开发环境创建的服务上.</p><h2 id="流行的内网穿透工具" tabindex="-1"><a class="header-anchor" href="#流行的内网穿透工具"><span>流行的内网穿透工具</span></a></h2><p>比较流行的内网穿透工具有:</p><ul><li><a href="https://ngrok.com/" target="_blank" rel="noopener noreferrer"><strong>ngrok</strong></a> - 使用简单,但免费用户仅支持一个端口转发</li><li><a href="https://github.com/fatedier/frp" target="_blank" rel="noopener noreferrer"><strong>frp</strong></a> - 开源免费,需要自行部署,稍显麻烦</li><li><a href="https://serveo.net/" target="_blank" rel="noopener noreferrer"><strong>Sereo</strong></a> - 不需要安装客户端,直接使用命令行即可,但是它使用的<code>serveo.net</code>域名在大陆无法访问</li></ul><h2 id="工作原理" tabindex="-1"><a class="header-anchor" href="#工作原理"><span>工作原理</span></a></h2><p>内网穿透工具都是基于tcp端口转发,通过在公网服务器上部署一个服务,当公网服务器收到请求时,将请求转发到本地,这样就可以实现内网穿透了.</p><p>以<code>frp</code>为例,下面这张图展示了使用<code>frp</code>实现内网穿透的流程:</p><figure><img src="https://cdn.jsdelivr.net/gh/hhypygy/images@master/20240113/frp工作流程.5aromnx55000.svg" alt="frp工作流程" tabindex="0" loading="lazy"><figcaption>frp工作流程</figcaption></figure><ol><li><strong>客户端(Client)</strong> - 即需要访问你的内网服务的对象,比如说在支付回调场景中,<code>客户端</code>指的就是<code>支付网关</code>,它通过公网连接到<code>FRP</code>服务器(FRPServer).</li><li><strong>FRP服务器</strong> - 用于接收客户端的请求,然后转发到你本地的<code>frp客户端</code>.需要部署在拥有独立ip的公网服务器上</li><li><strong>FRP客户端</strong> - 用于接收<code>FRP服务器</code>转发过来的请求,然后转发到你本地的服务上.需要部署在你本地的电脑上</li><li><strong>内网服务</strong> - 即你本地的服务,比如说在支付回调场景中,<code>内网服务</code>指的就是你本地的<code>支付回调端点</code></li></ol><h2 id="使用docker部署frp" tabindex="-1"><a class="header-anchor" href="#使用docker部署frp"><span>使用<code>docker</code>部署<code>frp</code></span></a></h2><h3 id="准备工作" tabindex="-1"><a class="header-anchor" href="#准备工作"><span>准备工作</span></a></h3><p>先准备一个域名解析到你的公网服务器上,然后使用<code>nginx</code>或者<code>caddy</code>这类的反向代理服务器把域名指向<code>frp</code>服务端的<code>http</code>端口</p><p>这里以<code>caddy</code>为例:</p><details class="hint-container details"><summary>Caddyfile</summary><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" data-title="nginx" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">frp.cruldra.</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">cn</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">	tls</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> cruldra@gmail.com</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">	reverse_proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 172.17.0.1:8007 {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">		header_up</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> X-Forwarded-For {remote_host}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="在公网服务器上配置frp服务端" tabindex="-1"><a class="header-anchor" href="#在公网服务器上配置frp服务端"><span>在公网服务器上配置<code>frp</code>服务端</span></a></h3><ol><li>创建<code>Dockerfile</code></li></ol><details class="hint-container details"><summary>Dockerfile</summary><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> amd64/alpine:3.10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">LABEL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> maintainer=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;snowdream &lt;hzxvvs@google.com&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> FRP_VERSION 0.53.2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> cd /root \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &amp;&amp;  wget --no-check-certificate -c https://github.com/fatedier/frp/releases/download/v\${FRP_VERSION}/frp_\${FRP_VERSION}_linux_amd64.tar.gz \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &amp;&amp;  tar zxvf frp_\${FRP_VERSION}_linux_amd64.tar.gz  \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &amp;&amp;  cd frp_\${FRP_VERSION}_linux_amd64/ \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &amp;&amp;  cp frps /usr/bin/ \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &amp;&amp;  cd /root \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &amp;&amp;  rm frp_\${FRP_VERSION}_linux_amd64.tar.gz \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &amp;&amp;  rm -rf frp_\${FRP_VERSION}_linux_amd64/ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#61AFEF;">ENTRYPOINT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> /usr/bin/frps -c /etc/frp/frps.ini</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><ol start="2"><li>构建出镜像</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dongjak/frp:latest</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>创建服务器配置文件<code>frps.ini</code></li></ol><details class="hint-container details"><summary>frps.ini</summary><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[common]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#通讯端口，用于和客户端内网穿透传输数据的端口，可自定义</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">bind_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 7000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#http监听端口，注意可能和服务器上其他服务用的80冲突，比如centos有些默认有Apache，默认80，可自定义</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">vhost_http_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 8007</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#https监听端口，默认443，可自定义</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">vhost_https_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 4437</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#通过浏览器查看 frp 的状态以及代理统计信息展示(端口、用户名、密码)，可自定义</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">dashboard_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 7500</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">dashboard_user</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> dongjak</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">dashboard_pwd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 123394</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#通讯令牌(客户端需和此处一致)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> frp123</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># frp日志配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">log_file</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> /var/log/frps.log</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">log_level</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> info</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">log_max_days</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><ol start="4"><li>运行<code>frp</code>服务端</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">  --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --network</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> frp</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/app/frp/frps.ini:/etc/frp/frps.ini</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/app/frp/frps.log:/var/log/frps.log</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">dongjak/frp:latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打开<code>frps.log</code>文件看到出现类似下面的输出表示<code>frp</code>服务端启动成功:</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>2024/01/13 16:57:09 [I] [root.go:104] frps uses config file: /etc/frp/frps.ini</span></span>
<span class="line"><span>2024/01/13 16:57:09 [I] [service.go:225] frps tcp listen on 0.0.0.0:7000</span></span>
<span class="line"><span>2024/01/13 16:57:09 [I] [service.go:292] http service listen on 0.0.0.0:8007</span></span>
<span class="line"><span>2024/01/13 16:57:09 [I] [service.go:306] https service listen on 0.0.0.0:4437</span></span>
<span class="line"><span>2024/01/13 16:57:09 [I] [root.go:113] frps started successfully</span></span>
<span class="line"><span>2024/01/13 16:57:09 [I] [service.go:338] dashboard listen on 0.0.0.0:7500</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>下载<code>frp</code>客户端</li></ol><p>在<a href="https://github.com/fatedier/frp/releases/tag/v0.53.2" target="_blank" rel="noopener noreferrer">这里</a>下载<code>windows</code>版本的<code>frp</code>发行包,需要和<code>frp</code>服务端版本一致</p><p>下载完解压后如图:</p><figure><img src="https://cdn.jsdelivr.net/gh/hhypygy/images@master/20240114/image.5a58fqdrk940.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>这里面<code>frps</code>是<code>frp</code>服务端,<code>frpc</code>是<code>frp</code>客户端,<code>frps</code>可以删掉</p><ol start="6"><li>创建客户端配置文件<code>frpc.ini</code></li></ol><details class="hint-container details"><summary>frpc.ini</summary><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[common]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#填写服务器公网IP地址</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">server_addr</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 公网服务器地址</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#通讯端口，和服务端保持一致（如果是第三方云服务器需在厂商安全组策略中开放该端口）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">server_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 7000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#通讯令牌，和服务端保持一致</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">token</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> frp123</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[web]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> http</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">local_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 8084</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">custom_domains</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> frp.cruldra.cn</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">[web2]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> http</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">local_port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> 8083</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">custom_domains</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#98C379;"> frp2.cruldra.cn</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>运行客户端</li></ol><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" data-title="powershell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">frpc.exe</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">c .\\frpc.ini</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>看到如下输出表示成功:</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>WARNING: ini format is deprecated and the support will be removed in the future, please use yaml/json/toml format instead!</span></span>
<span class="line"><span>2024/01/14 01:03:27 [I] [root.go:141] start frpc service for config file [.\\frpc.ini]</span></span>
<span class="line"><span>2024/01/14 01:03:27 [I] [service.go:287] try to connect to server...</span></span>
<span class="line"><span>2024/01/14 01:03:27 [I] [service.go:279] [2104d01f397972e8] login to server success, get run id [2104d01f397972e8]</span></span>
<span class="line"><span>2024/01/14 01:03:27 [I] [proxy_manager.go:173] [2104d01f397972e8] proxy added: [web]</span></span>
<span class="line"><span>2024/01/14 01:03:27 [I] [control.go:169] [2104d01f397972e8] [web] start proxy success</span></span>
<span class="line"><span>2024/01/14 01:03:39 [E] [proxy.go:204] [2104d01f397972e8] [web] connect to local service [127.0.0.1:8084] error: dial tcp 127.0.0.1:8084: connectex: No connection could be made because the target machine actively refused it.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="8"><li>测试</li></ol><p>运行本地服务,然后使用域名访问即可:</p><figure><img src="https://cdn.jsdelivr.net/gh/hhypygy/images@master/20240114/image.1jbg8uo7ja1s.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></details>`,35),t=[l];function r(p,h){return i(),a("div",null,t)}const k=s(n,[["render",r],["__file","内网穿透.html.vue"]]),c=JSON.parse('{"path":"/Tools/Network/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html","title":"内网穿透","lang":"zh-CN","frontmatter":{"title":"内网穿透","comment":false,"editLink":false,"prev":false,"next":false,"description":"简介 有时候需要将本地的服务暴露到外网,比如对接支付的时候,支付网关需要回调我们的接口 我们可以把本地服务部署到拥有独立ip的公网服务器上去,但是对接测试阶段服务还不完善,随时需要调整,这样就会导致改动一行代码都要重新部署,非常麻烦. 这时候就可以用内网穿透工具来把本地服务暴露到外网,让支付网关可以直接回调到我们本地开发环境创建的服务上. 流行的内网穿...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/Tools/Network/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html"}],["meta",{"property":"og:site_name","content":"一星的臭弟弟"}],["meta",{"property":"og:title","content":"内网穿透"}],["meta",{"property":"og:description","content":"简介 有时候需要将本地的服务暴露到外网,比如对接支付的时候,支付网关需要回调我们的接口 我们可以把本地服务部署到拥有独立ip的公网服务器上去,但是对接测试阶段服务还不完善,随时需要调整,这样就会导致改动一行代码都要重新部署,非常麻烦. 这时候就可以用内网穿透工具来把本地服务暴露到外网,让支付网关可以直接回调到我们本地开发环境创建的服务上. 流行的内网穿..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://cdn.jsdelivr.net/gh/hhypygy/images@master/20240113/frp工作流程.5aromnx55000.svg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-03T23:01:39.000Z"}],["meta",{"property":"article:author","content":"Cruldra"}],["meta",{"property":"article:modified_time","content":"2024-07-03T23:01:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"内网穿透\\",\\"image\\":[\\"https://cdn.jsdelivr.net/gh/hhypygy/images@master/20240113/frp工作流程.5aromnx55000.svg\\",\\"https://cdn.jsdelivr.net/gh/hhypygy/images@master/20240114/image.5a58fqdrk940.png\\",\\"https://cdn.jsdelivr.net/gh/hhypygy/images@master/20240114/image.1jbg8uo7ja1s.png\\"],\\"dateModified\\":\\"2024-07-03T23:01:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Cruldra\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"流行的内网穿透工具","slug":"流行的内网穿透工具","link":"#流行的内网穿透工具","children":[]},{"level":2,"title":"工作原理","slug":"工作原理","link":"#工作原理","children":[]},{"level":2,"title":"使用docker部署frp","slug":"使用docker部署frp","link":"#使用docker部署frp","children":[{"level":3,"title":"准备工作","slug":"准备工作","link":"#准备工作","children":[]},{"level":3,"title":"在公网服务器上配置frp服务端","slug":"在公网服务器上配置frp服务端","link":"#在公网服务器上配置frp服务端","children":[]}]}],"git":{"createdTime":1720047699000,"updatedTime":1720047699000,"contributors":[{"name":"cruldra","email":"cruldra@gmail.com","commits":1}]},"readingTime":{"minutes":4.43,"words":1328},"filePathRelative":"Tools/Network/内网穿透.md","localizedDate":"2024年7月3日","autoDesc":true}');export{k as comp,c as data};
