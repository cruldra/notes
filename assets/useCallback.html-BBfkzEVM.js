import{_ as a,r as n,o as h,c as k,d as e,w as t,a as i,b as s,e as r}from"./app-Bmelea3n.js";const d={},c=i("h2",{id:"简介",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#简介"},[i("span",null,"简介")])],-1),p=i("p",null,[i("strong",null,[s("在"),i("code",null,"React"),s("的函数组件中,每次组件重新渲染时,内部定义的所有函数都会被重新创建")]),s(",下面这个例子证明了这一点:")],-1),B=i("div",{class:"language-js line-numbers-mode","data-highlighter":"shiki","data-ext":"js","data-title":"js",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"const"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}},"useState"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}},"useEffect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"} "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," React"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"export"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}}," default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," () "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"=>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"    const"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}},"count"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}},"setCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}}," useState"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"    const"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}}," incrementCount"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," () "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"=>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"        setCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"count"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}}," +"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"    };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#7F848E","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    //监视incrementCount函数引用的变化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"    useEffect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"(() "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"=>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#7F848E","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        //如果这里被打印，说明incrementCount函数的引用变了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"        alert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"React 演示 1: 函数被重新创建了"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"    }, ["),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"incrementCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"]);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"    return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"        <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"div"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"            <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"p"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">You clicked "),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#C678DD"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"count"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#C678DD"}},"}"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," times</"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"p"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"            <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"button"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#D19A66","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," onClick"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#C678DD"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"incrementCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#C678DD"}},"}"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"                Click me")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"            </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"button"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"        </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"div"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"    );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"};")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1),g=i("div",{class:"language-css line-numbers-mode","data-highlighter":"shiki","data-ext":"css","data-title":"css",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"})])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"})])],-1),o=i("p",null,[s("在上面这个例子中,每次点击按钮都会弹出"),i("code",null,'"函数被重新创建了"'),s("的提示,这是因为每次组件重新渲染时,"),i("code",null,"incrementCount"),s(" 函数都会被重新创建(即"),i("code",null,"incrementCount"),s("函数的引用发生了变化),从而触发了"),i("code",null,"useEffect"),s("的回调函数")],-1),y=i("p",null,[s("现在我们用"),i("code",null,"useCallback"),s("来优化一下上面的代码:")],-1),u=i("div",{class:"language-js line-numbers-mode","data-highlighter":"shiki","data-ext":"js","data-title":"js",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"const"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}},"useState"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}},"useEffect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}},"useCallback"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"} "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," React"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"export"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}}," default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," () "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"=>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"    const"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}},"count"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}},"setCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}}," useState"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#7F848E","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 使用useCallback包裹incrementCount函数，并移除count作为依赖项")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"    const"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#E5C07B"}}," incrementCount"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}}," useCallback"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"(() "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"=>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#7F848E","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        // 使用函数形式的setState来更新count")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"        setCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"(("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#E06C75","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"prevCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"=>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}}," prevCount"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}}," +"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"    }, []); "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#7F848E","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 依赖项数组为空，incrementCount不会被重新创建")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#7F848E","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 监视incrementCount函数引用的变化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"    useEffect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"(() "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"=>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#7F848E","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        //如果这里被打印，说明incrementCount函数的引用变了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"        alert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}},'"React 演示 2: 函数被重新创建了"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"    }, ["),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"incrementCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"]);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C678DD"}},"    return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"        <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"div"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"            <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"p"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">You clicked "),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#C678DD"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"count"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#C678DD"}},"}"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}}," times</"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"p"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"            <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"button"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#D19A66","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," onClick"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#C678DD"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E06C75"}},"incrementCount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#C678DD"}},"}"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"                Click me")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"            </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"button"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"        </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#E06C75"}},"div"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"    );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#ABB2BF"}},"};")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1),C=i("div",{class:"language-css line-numbers-mode","data-highlighter":"shiki","data-ext":"css","data-title":"css",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"})])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"})])],-1),E=r('<p>上面的例子中使用<code>useCallback</code>包裹<code>incrementCount</code>函数,它会记住<code>incrementCount</code> 函数的引用,并且只有在依赖项数组发生变化时才会重新创建<code>incrementCount</code> 函数,这样就避免了每次组件重新渲染时都重新创建<code>incrementCount</code>函数,从而避免了不必要的渲染和计算</p><h2 id="什么时候使用usecallback" tabindex="-1"><a class="header-anchor" href="#什么时候使用usecallback"><span>什么时候使用<code>useCallback</code></span></a></h2><p>大部分情况下,<strong><code>React</code>函数组件在每次重新渲染时内部定义的所有函数都会被重新创建</strong> 这个特性都不会带来什么问题</p><p>但是如果要把函数作为依赖被传递给子组件或其他使用了依赖数组的钩子(如<code>useEffect</code>,<code>useMemo</code>,<code>useReducer</code>等),每次渲染都创建新的函数可能会导致子组件或钩子的不必要的重渲染或重新执行.</p><p>这时就可以用<code>useCallback</code>来优化,使其仅在依赖项发生变化时才重新创建函数</p>',5);function m(A,F){const l=n("CodeDemo");return h(),k("div",null,[c,p,e(l,{id:"code-demo-6",type:"react",title:"React%20%E6%BC%94%E7%A4%BA%201",code:"eJxtkc1OwkAUhV/lpqsSSUa2CGyIL6ArQ1nUYUiqMCXt1Jg03RgDmoDGCATFuDBGTVzIwhVifBmnLStfwc5UqEXvan7O+c7cO66yZyt5BZvUZuA6NtlmOiNZiFab9TrBzIMibBEdsw2NapQctkyLQY3UdafBQM1AsQSuRiGqmFHBpkNZFmzCymJVjfwLrLqekZREbVBskSahsTaSpoiiFhxVcmENcoIhbrwlC6FgfBE+ttM03nn3BxM+GwT9p+D6mJ+PeHcYG5bdqX/yEOIPR/7tTfhxNe90w7tn//SS9yZfs2748uqPzv7LEHQZE2V8TtsJTG8Qi6maIgcI/qwf3E8hl4fYFsHnnZ4/nPCTMX+bCqeS+ektC5V0UjUZnUWYY1FQk5xCzTgoJVt51CrtmA7ghoH3SQ1cOT4PmNEkdgG1VtW7DmMmBZOWhaHopsO9FbkoKYQmWQGhmPTLUEDJ60QT4t8U7xtcFOr0"},{default:t(()=>[B,g]),_:1}),o,y,e(l,{id:"code-demo-16",type:"react",title:"React%20%E6%BC%94%E7%A4%BA%202",code:"eJxtks9K41AUxl/lkFXKCJmZpbbdlHmBmdVgXcT0FjqmNyW5kYGQzeDYGWgVUYtaFfyvuNCFik1TfZncJF35Ct57Q0xTGgicG853ft93bhzplyXNS5qBLQKObaEfRCVoDlj1rV5HGhFlRdX1ZVVbcaEE35GqkYUqrmL0u2WYBGqorto6AbkApTI4VQzsSQYuaoaN2QgLkQqvlpg+ZcifC2IK71YUCEav0c71BIt2/sZngwbWTNREONHT9ijcvX/zO3TwFF0Nx/vnAhCMDoNnL3g5ih9745PBpIO8PsGnBDnnOOcjAdHRKfU3o4M15l94Do8uwv5D2LsX2EyX5pPllolWRSlGf5zgE3zhcXmzOweLS4UFAUstM1g0XGMhohuPxcu7Dp67gX8Qn96O213Gpv/6dOhNrC7qb8VX67M2Rf1dFoYFoJt7tNNLFB9XOys/vfwTHh/Gr/vjdocRw//btMsXHt89hHsbsxh8usAwRuCtZ8NUHZlErkrih4HQ34nOPfg6D4lsKg5XSoVsQXkSW1ea10TENjHIGadYa6yWs6P41Cr/NGzQ9Ia2gmrgiOtygTSayCoqrenuZZsQA4OBK1xQcvJwd6qdP6IRmmhqkJJMmhAUlcwdD+GyV3LfAcYccFc="},{default:t(()=>[u,C]),_:1}),E])}const D=a(d,[["render",m],["__file","useCallback.html.vue"]]),f=JSON.parse('{"path":"/Programming/Frontend/React/useCallback.html","title":"useCallback","lang":"zh-CN","frontmatter":{"title":"useCallback","comment":false,"editLink":false,"prev":false,"next":false,"description":"简介 在React的函数组件中,每次组件重新渲染时,内部定义的所有函数都会被重新创建,下面这个例子证明了这一点: 在上面这个例子中,每次点击按钮都会弹出\\"函数被重新创建了\\"的提示,这是因为每次组件重新渲染时,incrementCount 函数都会被重新创建(即incrementCount函数的引用发生了变化),从而触发了useEffect的回调函数 现...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/Programming/Frontend/React/useCallback.html"}],["meta",{"property":"og:site_name","content":"一星的臭弟弟"}],["meta",{"property":"og:title","content":"useCallback"}],["meta",{"property":"og:description","content":"简介 在React的函数组件中,每次组件重新渲染时,内部定义的所有函数都会被重新创建,下面这个例子证明了这一点: 在上面这个例子中,每次点击按钮都会弹出\\"函数被重新创建了\\"的提示,这是因为每次组件重新渲染时,incrementCount 函数都会被重新创建(即incrementCount函数的引用发生了变化),从而触发了useEffect的回调函数 现..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-03T23:01:39.000Z"}],["meta",{"property":"article:author","content":"Cruldra"}],["meta",{"property":"article:modified_time","content":"2024-07-03T23:01:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"useCallback\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-07-03T23:01:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Cruldra\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"什么时候使用useCallback","slug":"什么时候使用usecallback","link":"#什么时候使用usecallback","children":[]}],"git":{"createdTime":1720047699000,"updatedTime":1720047699000,"contributors":[{"name":"cruldra","email":"cruldra@gmail.com","commits":1}]},"readingTime":{"minutes":2.02,"words":606},"filePathRelative":"Programming/Frontend/React/useCallback.md","localizedDate":"2024年7月3日","autoDesc":true}');export{D as comp,f as data};
