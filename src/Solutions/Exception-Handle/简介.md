---
title: 简介
comment: false
editLink: false
prev: false
next: false
order: 1
---


## 标准异常模型

```kotlin


class ArgumentException(
    override val code: Int,
    override val message: String? = null,
    override val referenceUrl: String? = null,
    override val cause: Throwable? = null,
    val data: Any? = null
) : BusinessException(code, message, referenceUrl, cause) {

    data class TypeMistakeData(
        val target: Class<*>,
        val field: String,
        val expected: Class<*>,
        val actual: Class<*>
    )

    companion object {

        @JvmStatic
        private val TYPE_MISTAKE = 17781

        @JvmStatic
        private val TYPE_MISTAKE_REGEX = """Can not set final ([\w.]+) field ([\w.]+)\.(\w+) to ([\w.]+)""".toRegex()

        private fun typeMistake(data: TypeMistakeData) =

            ArgumentException(
                TYPE_MISTAKE,
                "设置${data.target}的${data.field}字段时出错,预期类型是${data.expected},实际接收到${data.actual}"
            )

        private fun extractTypeMistakeData(input: String): TypeMistakeData {
            val matchResult = TYPE_MISTAKE_REGEX.find(input)

            val (target, expected, field, actual) = matchResult!!.destructured

            return TypeMistakeData(Class.forName(target), field, Class.forName(expected), Class.forName(actual))
        }

        fun parse(cause: Throwable): ArgumentException? {

            if (cause is IllegalArgumentException) {
                if (cause.message?.matches(TYPE_MISTAKE_REGEX) == true) {
                    return typeMistake(extractTypeMistakeData(cause.message!!))
                }
            }
            return null
        }

    }
}
```
